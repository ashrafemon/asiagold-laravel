/* ------------------------------------------------------------------------
	* Swift Box - jQuery contents slider and viewer
	*
	* @version: 	2.1
	* @requires:	jQuery v1.7
	* @author:		Luca Montanari aka LCweb (https://lcweb.it)
------------------------------------------------------------------------- */
(function(f) {
    lcnb_box_id = 1;
    lcnb_resize_tout = [];
    lcnb_exp_scroll_tout = [];
    var O = function(F, r) {
        var h = f.extend({
                src: [],
                rss2json_token: !1,
                only_w_images: !1,
                preloader: !0,
                theme: "light",
                layout: "horizontal",
                height: 300,
                width: "100%",
                min_news_h: 100,
                min_news_w: 200,
                min_horiz_w: 400,
                horiz_img_h: !1,
                vert_img_w: !1,
                read_more_txt: "..",
                boxed_news: !1,
                horiz_img_mode: !1,
                buttons_position: "bottom",
                max_news: 6,
                news_per_time: 3,
                social_share: !0,
                hide_elements: [],
                script_basepath: !1,
                scripts_man_added: !1,
                touchswipe: !0,
                lightbox: !0,
                title_behavior: "expand",
                img_behavior: "lightbox",
                date_format: "d mmmm yyyy",
                elapsed_time: !1,
                read_more_btn: !1,
                read_more_btn_txt: "Read more",
                nav_arrows: !1,
                autoplay: !1,
                animation_time: 700,
                slideshow_time: 6E3,
                carousel: !1,
                slide_all: !1,
                pause_on_hover: !0,
                expandable_news: !0,
                scroll_exp_elem: !0,
                exp_main_img_pos: "inside",
                manage_exp_images: !0,
                exp_img_w: "1_2",
                exp_img_h: 225,
                exp_img_on_row: !1,
                autop_after_exp: !1,
                exp_in_lightbox: !1,
                exp_lb_w: "90%",
                exp_lb_max_w: 1200,
                short_d_names: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                full_d_names: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                short_m_names: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                full_m_names: "January February March April May June July August September October November December".split(" "),
                elapsed_names: "ago seconds minute minutes hour hours day days week weeks month months".split(" ")
            }, r),
            n = {
                box_id: lcnb_box_id++,
                box_curr_w: Math.round(f(F).width()),
                news_array: [],
                sorted_news: [],
                fetches_done: 0,
                news_count: 0,
                inl_news_count: 0,
                orig_texts: [],
                excerpts: [],
                clean_texts: [],
                news_w: 0,
                news_h: 0,
                news_to_show: 0,
                first_shown: 1,
                curr_box_margin: 0,
                is_shown: !1,
                is_playing: !1,
                is_moving: !1,
                waiting_for_anim: !1,
                paused_on_h: !1,
                is_expanded: !1,
                event_type: "click"
            },
            l = f(F);
        l.data("lcnb_vars", n);
        l.data("lcnb_settings", h);
        var O = function() {
                h.src.length || H(l);
                f.each(h.src, function(b, c) {
                    var e = this,
                        g = "",
                        k = "";
                    switch (this.type) {
                        case "facebook":
                            k = "https://graph.facebook.com/v2.12/" + e.id + "/posts?fields=name,message,picture,description,created_time,link,attachments{media},type,object_id&limit=" + h.max_news + "&access_token=305852493286041|opJMX7AJ9fVNa8xLvgohARTOR3k";
                            break;
                        case "twitter":
                            var d = "undefined" == typeof e.include_retweet || !0 === e.include_retweet ? "true" : "false";
                            k = lcnb_script_basepath + "php_assets/twitter_oauth.php";
                            g = {
                                url: "statuses/user_timeline.json?screen_name=" + e.id + "&exclude_replies=true&tweet_mode=extended&include_rts=" + d + "&count=" + (h.max_news + 2)
                            };
                            break;
                        case "google":
                            -1 < e.id.indexOf("/") ? (d = e.id.indexOf("?"), -1 < d && (e.id = e.id.substring(0, d)), -1 === e.id.indexOf("/posts") && (e.id += "/posts"), d = e.id.split("/"), d = d[d.length - 2]) : d = e.id;
                            k = "https://www.googleapis.com/plus/v1/people/" +
                                d + "/activities/public?key=AIzaSyCalvBYOVexkTeFT5aIELfgpTVlyGCIvvA";
                            g = {
                                maxResults: h.max_news,
                                prettyprint: !1,
                                fields: "items(actor(image), annotation, object(content, attachments(content,fullImage,image,thumbnails,objectType)), published, url, verb)"
                            };
                            break;
                        case "youtube":
                            var y = 50 < h.max_news ? 50 : h.max_news;
                            "undefined" != typeof e.playlist ? k = "https://www.googleapis.com/youtube/v3/playlistItems?playlistId=" + encodeURIComponent(e.playlist) + "&key=AIzaSyCalvBYOVexkTeFT5aIELfgpTVlyGCIvvA&part=snippet&order=date&maxResults=" +
                                y : f.ajax({
                                    url: "https://www.googleapis.com/youtube/v3/channels?part=snippet&forUsername=" + e.id + "&maxResults=1&key=AIzaSyCalvBYOVexkTeFT5aIELfgpTVlyGCIvvA",
                                    dataType: "jsonp",
                                    success: function(c) {
                                        k = c.items.length ? "https://www.googleapis.com/youtube/v3/activities?part=snippet&channelId=" + (0 == c.items.length ? "" : c.items[0].id) + "&maxResults=" + y + "&fields=items(contentDetails%2Csnippet)&key=AIzaSyCalvBYOVexkTeFT5aIELfgpTVlyGCIvvA" : "https://www.googleapis.com/youtube/v3/search?channelId=" + encodeURIComponent(e.id) +
                                            "&key=AIzaSyCalvBYOVexkTeFT5aIELfgpTVlyGCIvvA&part=snippet&order=date&maxResults=" + y;
                                        I(b, "youtube", k, g, e, {
                                            is_yt_channel: c.items.length ? !1 : !0
                                        })
                                    }
                                });
                            break;
                        case "pinterest":
                            d = e.url;
                            "/" == d.substr(d.length - 1) && (d = d.substr(0, d.length - 1));
                            k = d.toLowerCase().replace("http://", "https://") + ".rss";
                            break;
                        case "soundcloud":
                            d = e.url;
                            "/" == d.substr(d.length - 1) && (d = d.slice(0, -1));
                            d = d.split("/");
                            var m = d[d.length - 1];
                            f.ajax({
                                url: "https://api.soundcloud.com/resolve?url=" + encodeURIComponent("https://soundcloud.com/" + m) + "&client_id=4bc0297066dd5e45babd36ce10075160",
                                dataType: "jsonp",
                                success: function(c) {
                                    "object" == typeof c && c.id ? (k = "https://api.soundcloud.com/users/" + c.id + "/tracks?client_id=4bc0297066dd5e45babd36ce10075160", I(b, "soundcloud", k, g, e)) : console.error("swiftbox - failed to get soudcloud user ID for " + m)
                                }
                            });
                            k = "https://api.soundcloud.com/users/" + m + "/tracks?client_id=4bc0297066dd5e45babd36ce10075160";
                            break;
                        case "tumblr":
                            d = e.url;
                            k = "https://api.tumblr.com/v2/blog/" + d.toLowerCase().replace("http://", "").replace("https://", "").split("/")[0] + "/posts?api_key=pcCK9NCjhSoA0Yv9TGoXI0vH6YzLRiqKPul9iC6OQ6Pr69l2MV&filter=text&limit=" +
                                h.max_news;
                            break;
                        default:
                            k = e.url
                    }
                    if ("rss" == this.type || "pinterest" == this.type) g = {
                        rss_url: k,
                        api_key: h.rss2json_token,
                        count: h.max_news
                    }, k = "https://api.rss2json.com/v1/api.json";
                    ("youtube" != e.type && "soundcloud" != e.type || "youtube" == e.type && "undefined" != typeof e.playlist) && I(b, e.type, k, g, e)
                })
            },
            I = function(b, c, e, g, k, d) {
                var y = h.hide_elements;
                "object" == typeof k.hide_elements && (y = f.merge(y, k.hide_elements));
                var m = void 0 == k.img ? !1 : k.img,
                    p = "object" == typeof k.max_img_size ? k.max_img_size : !1,
                    q = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
                d = -1 !== jQuery.inArray(c, ["facebook", "twitter", "rss", "pinterest"]) ? "json" : "jsonp";
                f.ajax({
                    url: e,
                    data: g,
                    dataType: d,
                    error: function(b, f) {
                        console.error([c, e, f])
                    },
                    success: function(d) {
                        var g = !1;
                        n.fetches_done += 1;
                        switch (c) {
                            case "facebook":
                                "undefined" != typeof d.error ? g = d.errors.error_message : d = d.data;
                                break;
                            case "twitter":
                                "undefined" != typeof d.errors && (g = d.errors);
                                break;
                            case "google":
                                d = d.items;
                                "undefined" != typeof d.error && (g = d.error);
                                break;
                            case "youtube":
                                "undefined" != typeof d.error ? g = d.error.message : d = d.items;
                                break;
                            case "soundcloud":
                                "undefined" != typeof d.errors && (g = d.errors.error_message);
                                break;
                            case "tumblr":
                                200 == d.meta.status ? d = d.response.posts : g = d.response;
                                break;
                            default:
                                "ok" == d.status ? d = d.items : g = d.message
                        }
                        if (g) return console.error([c, e, g]), !1;
                        f.each(d, function(e, d) {
                            switch (c) {
                                case "facebook":
                                    var g = d.created_time.replace("+0000", "+00:00"),
                                        l = new Date(g),
                                        t = d.message ? d.message : d.description;
                                    t = t ? A(t, m, p, "", "", !0) : {
                                        txt: "",
                                        img: ""
                                    };
                                    m || ("photo" != d.type && "video" != d.type && "link" != d.type || "undefined" == typeof d.attachments ?
                                        "photo" == d.type && "undefined" == typeof d.attachments ? t.img = "https://graph.facebook.com/" + d.object_id + "/picture?type=normal&width=9999&height=9999" : "link" != d.type && "event" != d.type || "undefined" == typeof d.picture || (t.img = d.picture) : t.img = d.attachments.data[0].media.image.src, "string" == typeof t.img && -1 != t.img.indexOf("safe_image.php") && (t.img = t.img.replace(/130/g, 1E3)));
                                    g = {
                                        time: l.getTime(),
                                        date: g,
                                        title: "undefined" == typeof d.name ? "" : d.name,
                                        txt: t.txt.replace(q, '<a href="$1">$1</a>'),
                                        link: d.link,
                                        s_link: d.link,
                                        img: t.img
                                    };
                                    break;
                                case "twitter":
                                    var u = d.created_at.replace(/^... (...) (..) (........) (...)(..) (....)$/, function(b, d, c, e, g, f, k) {
                                        return k + "-" + {
                                            Jan: "01",
                                            Feb: "02",
                                            Mar: "03",
                                            Apr: "04",
                                            May: "05",
                                            Jun: "06",
                                            Jul: "07",
                                            Aug: "08",
                                            Sep: "09",
                                            Oct: "10",
                                            Nov: "11",
                                            Dec: "12"
                                        } [d] + "-" + c + "T" + e + g + ":" + f
                                    });
                                    l = new Date(u);
                                    p && (g = z(g, p.w, p.h));
                                    g = "undefined" == typeof d.entities.media || "undefined" == typeof d.entities.media[0] || "photo" != d.entities.media[0].type || m ? m ? m : "undefined" != typeof k.use_avatar && k.use_avatar ? d.user.profile_image_url :
                                        "" : d.entities.media[0].media_url_https;
                                    if ("undefined" != typeof d.entities.urls && "undefined" != typeof d.entities.urls[0]) var r = t = d.entities.urls[0].expanded_url;
                                    else t = "https://twitter.com/" + d.user.screen_name + "/status/" + d.id_str, r = "";
                                    g = {
                                        time: l.getTime(),
                                        date: u,
                                        title: "",
                                        txt: d.full_text.replace(q, '<a href="$1">$1</a>'),
                                        link: t,
                                        s_link: r,
                                        img: g.replace("_normal", ""),
                                        user_id: h.src[b].id,
                                        tweet_id: d.id_str
                                    };
                                    break;
                                case "google":
                                    u = d.published;
                                    l = new Date(u);
                                    g = -1 != y.indexOf("image") ? "" : U(d, m);
                                    p && (g = z(g, p.w, p.h));
                                    t = "share" == d.verb ? d.annotation : d.object.content;
                                    g = {
                                        time: l.getTime(),
                                        date: u,
                                        title: "",
                                        txt: t,
                                        link: d.url,
                                        s_link: d.url,
                                        img: g
                                    };
                                    break;
                                case "youtube":
                                    u = d.snippet.publishedAt;
                                    l = new Date(u);
                                    t = "undefined" != typeof d.snippet.thumbnails.maxres ? d.snippet.thumbnails.maxres.url : d.snippet.thumbnails.high.url;
                                    g = m ? m : t;
                                    p && (g = z(g, p.w, p.h));
                                    t = t.replace("/maxresdefault.jpg", "").replace("/hqdefault.jpg", "").split("/");
                                    t = "https://www.youtube.com/watch?v=" + t[t.length - 1];
                                    g = {
                                        time: l.getTime(),
                                        date: u,
                                        title: d.snippet.title,
                                        txt: d.snippet.description.replace(/\n/g,
                                            "<br/>").replace(q, '<a href="$1">$1</a>'),
                                        link: t,
                                        s_link: t,
                                        img: g
                                    };
                                    break;
                                case "soundcloud":
                                    l = new Date(d.created_at);
                                    t = "https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/" + d.id + "&auto_play=true&hide_related=true&visual=true";
                                    g = "";
                                    d.artwork_url ? g = d.artwork_url.replace("-large.", "-t500x500.") : d.user.avatar_url && (g = d.user.avatar_url.replace("-large.", "-t500x500."));
                                    g = {
                                        time: l.getTime(),
                                        date: d.created_at,
                                        title: d.title,
                                        txt: d.description.replace(/\n/g, "<br/>").replace(q, '<a href="$1">$1</a>'),
                                        link: t,
                                        s_link: d.permalink_url,
                                        img: g
                                    };
                                    break;
                                case "tumblr":
                                    if ("photo" != d.type && "link" != d.type && "text" != d.type) return !0;
                                    "photo" == d.type ? (l = "", t = d.short_url, g = A(f.trim(d.caption), "foo", p, h.src[b].strip_tags, h.src[b].remove_tags, !0), u = g.txt, g = m ? m : d.photos[0].original_size.url, p && (g = z(g, p.w, p.h))) : "link" == d.type ? (l = d.title, t = d.url, g = f.trim(d.description) ? f.trim(d.description) : f.trim(d.excerpt), g = A(g, m, p, h.src[b].strip_tags, h.src[b].remove_tags, !0), u = g.txt, g = g.img, "undefined" != typeof d.photos && (g = d.photos[0].original_size.url)) :
                                        (l = d.title, t = d.short_url, g = A(f.trim(d.body), m, p, h.src[b].strip_tags, h.src[b].remove_tags, !0), u = g.txt, g = g.img);
                                    g = {
                                        time: 1E3 * d.timestamp,
                                        date: new Date(1E3 * d.timestamp),
                                        title: l,
                                        txt: u,
                                        link: t,
                                        s_link: "link" == d.type ? d.short_url : t,
                                        img: g
                                    };
                                    break;
                                default:
                                    l = new Date(d.pubDate), g = "pinterest" == c ? d.thumbnail.replace("/192x/", "/550x/").replace("/236x/", "/550x/") : d.thumbnail, t = A(d.content, m, p, "pinterest" == c ? "a:first-child" : h.src[b].strip_tags, h.src[b].remove_tags, !0), p && (g = z(g, p.w, p.h)), g = {
                                        time: l.getTime(),
                                        date: d.pubDate,
                                        title: d.title,
                                        txt: t.txt,
                                        link: d.link,
                                        s_link: d.link,
                                        img: m ? m : g
                                    }
                            } - 1 !== f.inArray("title", y) && (g.title = ""); - 1 !== f.inArray("link", y) && (g.link = ""); - 1 !== f.inArray("image", y) && (g.img = "");
                            if (h.only_w_images && !g.img) return !0;
                            g.type = c;
                            g.link_target = k.link_target;
                            g.author = "undefined" == typeof k.author ? !1 : k.author;
                            l = "undefined" != typeof k.exp_img_manag ? k.exp_img_manag : {};
                            g.exp_img_pos = "undefined" != typeof l.pos ? l.pos : !1;
                            g.exp_img_w = "undefined" != typeof l.w ? l.w : !1;
                            g.exp_img_h = "undefined" != typeof l.h ? l.h : !1;
                            "undefined" !=
                            typeof k.self_s_link && k.self_s_link && (g.s_link = location.href);
                            "undefined" != typeof g.txt && "" != g.txt && n.news_array.push(g);
                            if (n.news_array.length - n.inl_news_count == h.max_news * (n.fetches_done + 1)) return !1
                        });
                        n.fetches_done == h.src.length && H(l)
                    }
                })
            },
            A = function(b, c, e, g, k, d) {
                -1 != b.indexOf("<img") && (b = "undefined" != typeof k && -1 !== k.indexOf("img") && -1 === k.indexOf("img:first") ? z(b, e, !0) : z(b, e));
                var h = f("<div />");
                "undefined" != typeof d && d && (b = b.replace(/\n/g, "<br/>"));
                h.append('<div id="lcnb_util" style="display: none !important;">' +
                    b + "</div>");
                f("#lcnb_util").lcnb_unselfclose_iframes();
                !c && h.find("#lcnb_util img").length ? (b = h.find("#lcnb_util img").first().attr("fake-src"), h.find("#lcnb_util img").first().remove()) : b = e ? z(c, e.w, e.h) : c;
                "undefined" != typeof k && k && 0 < f.trim(k).length && (k = k.split(","), f.each(k, function(b, d) {
                    h.find("#lcnb_util " + d).remove()
                }));
                "all" == g ? h.find("#lcnb_util *").not("p, br, iframe").each(function() {
                    var b = f(this).contents();
                    f(this).replaceWith(b)
                }) : "undefined" != typeof g && g && 0 < f.trim(g).length && (g = g.split(","),
                    f.each(g, function(b, d) {
                        h.find("#lcnb_util " + d).each(function() {
                            var b = f(this).contents();
                            f(this).replaceWith(b)
                        })
                    }));
                h.find("#lcnb_util *").removeAttr("style");
                h.find("*:empty").not("br, img, i, iframe").remove();
                for (x = 0; 5 > x; x++) h.find("#lcnb_util *:first").is("br") && h.find("#lcnb_util *:first").remove(), h.find("br").each(function() {
                    f(this).prev().is("p") && f(this).remove()
                });
                g = f.trim(h.find("#lcnb_util").html());
                return {
                    txt: f.trim(g),
                    img: b
                }
            },
            z = function(b, c, e) {
                if (!b) return b;
                var g = f("<div />");
                g.append('<div id="lcnb_fake_util" style="display: none !important;">' +
                    b + "</div>");
                g.find("img").wrap("<span></span>");
                b = g.find("#lcnb_fake_util").html();
                g.html('<div id="lcnb_fake_util" style="display: none !important;">' + b.replace(/<img/g, "<fake-img") + "</div>");
                g.find("fake-img").each(function() {
                    var b = f(this).attr("src");
                    "undefined" != typeof b && -1 != b.indexOf("safe_image.php") && (b = J(b, "url"));
                    f('<img fake-src="' + b + '" />').insertBefore(this);
                    f(this).remove()
                });
                "undefined" == typeof e && c && g.find("img").each(function() {
                    var b = f(this).attr("fake-src");
                    b = lcnb_script_basepath +
                        "php_assets/img_size_check.php?src=" + encodeURIComponent(b) + "&max_w=" + c.w + "&max_h=" + c.h;
                    f(this).attr("fake-src", b)
                });
                return g.find("#lcnb_fake_util").html()
            };
        f.fn.lcnb_unselfclose_iframes = function() {
            this.each(function() {
                f(this).find("iframe").each(function() {
                    var b = f(this),
                        c = "<iframe ",
                        e = b.prop("attributes");
                    f.each(e, function() {
                        c += this.name + '="' + this.value + '" '
                    });
                    b.replaceWith(c + "></iframe>")
                })
            });
            return this
        };
        var V = function(b, c, e) {
                return parseInt(c) && parseInt(e) ? lcnb_script_basepath + "php_assets/img_size_check.php?src=" +
                    encodeURIComponent(b) + "&max_w=" + c + "&max_h=" + e : b
            },
            H = function(b) {
                var c = b.data("lcnb_vars");
                if (c.sorted_news.length == h.max_news || 0 == c.news_array.length) return c.news_count = c.sorted_news.length, W(), !0;
                var e = 0,
                    g = 0;
                f.each(c.news_array, function(b, d) {
                    d.time > g && (e = b, g = d.time)
                });
                c.sorted_news.push(c.news_array[e]);
                c.news_array.splice(e, 1);
                H(b)
            },
            W = function() {
                h.news_per_time > n.news_count && (h.news_per_time = n.news_count);
                f.each(n.sorted_news, function(b, c) {
                    var e = b + 1,
                        g = 1 == h.social_share ? P(c.type, c) : "";
                    if ("undefined" !=
                        typeof c.link && "" != c.link) var k = "soundcloud" == c.type ? c.s_link : c.link,
                        d = '<div class="lcnb_link"><a href="' + k + '" target="_blank" title="check original source"></a></div>';
                    else d = "", "link" == h.title_behavior && (h.title_behavior = "none"), "link" == h.img_behavior && (h.img_behavior = "none");
                    var y = -1 === f.inArray("date", h.hide_elements) ? '<div class="lcnb_btn_time" ' + (h.read_more_btn ? 'style="display: none;"' : "") + '><time class="lcnb_date" pubdate="pubdate" datetime="' + c.date + '">' + Q(c.date) + "</time></div>" : "";
                    if (h.read_more_btn &&
                        "undefined" != typeof c.link && "" != c.link) {
                        var m = '<div class="lcnb_btn_time lcnb_rm_btn_wrap"><a class="lcnb_rm_btn" href="' + k + '">' + h.read_more_btn_txt + "</a></div>";
                        d = ""
                    } else m = "";
                    if (1 == h.expandable_news) var p = '<div class="lcnb_btn_expand noSwipe" title="expand text"></div>';
                    else p = "", "expand" == h.title_behavior && (h.title_behavior = "none"), "expand" == h.img_behavior && (h.img_behavior = "none");
                    var q = "",
                        u = "",
                        r = "";
                    if (-1 === f.inArray("btn_bar", h.hide_elements))
                        if ("side" == h.buttons_position && "vertical" == h.layout &&
                            h.boxed_news) {
                            if (1 == h.social_share || d || -1 === f.inArray("date", h.hide_elements)) q = '<div class="lcnb_buttons noSwipe">' + p + d + g + "</div>";
                            if (-1 === f.inArray("date", h.hide_elements) || m) r = '<div class="lcnb_btm_bar">' + y + m + "</div>"
                        } else if ("top" == h.buttons_position) {
                        if (1 == h.social_share || d || -1 === f.inArray("date", h.hide_elements) || m) u = '<div class="lcnb_top_bar">' + p + g + d + y + m + "</div>"
                    } else if (1 == h.social_share || d || -1 === f.inArray("date", h.hide_elements) || m) r = '<div class="lcnb_btm_bar">' + p + g + d + y + m + "</div>";
                    g = "" ==
                        c.title ? "" : "link" == h.title_behavior ? '<h3 class="lcnb_title"><a href="' + k + '" class="lcnb_linked_title">' + c.title + "</a></h3>" : '<h3 class="lcnb_title ' + ("expand" == h.title_behavior ? "lcnb_expand_trig noSwipe" : "") + '">' + c.title + "</h3>";
                    d = "undefined" == typeof c.author || "" == c.author ? "" : '<span class="lcnb_author">' + c.author + "</span> ";
                    n.excerpts[b + 1] = "undefined" != typeof c.excerpt ? c.excerpt : "";
                    n.orig_texts[b + 1] = d + c.txt;
                    p = m = y = "";
                    if ("none" != h.img_behavior) {
                        var w = "youtube" == c.type || "soundcloud" == c.type ? "lcnb_video_lb" :
                            "lcnb_img_lb";
                        "inline" == c.type && "undefined" != typeof c.video && (w = "lcnb_video_lb");
                        "expand" == h.img_behavior && h.expandable_news && (w += " lcnb_expand_trig");
                        "link" == h.img_behavior && (w += " lcnb_linked_img");
                        var v = "youtube" == c.type ? c.s_link : "soundcloud" == c.type ? c.link : "inline" == c.type && "undefined" != typeof c.video ? c.video : J(c.img, "src");
                        v && (y = "link" == h.img_behavior ? 'data-link="' + k + '" data-link-target="' + c.link_target + '"' : "", m = 'data-mfp-src="' + v + '"', p = '<div class="lcnb_img_ol ' + w + '"></div>')
                    }
                    y = (k = "undefined" !=
                        typeof c.img && c.img ? '<div class="lcnb_img lcnb_loading_img" ' + y + " " + m + ">" + p + "<figure style=\"background-image: url('" + c.img + '\');"></figure><img src="' + c.img + '" /></div>' : "") && "horizontal" == h.layout && h.horiz_img_mode ? "lcnb_h_img_mode" : "";
                    e = '<article class="lcnb_news lcnb_type_' + c.type + " " + y + " " + (y && !g ? "lcnb_him_no_txt" : "") + '" style="opacity: 0; top: 30px;" rel="' + e + '"><div class="lcnb_news_inner">' + q + k + '<div class="lcnb_contents_wrap">' + u + ('<section class="lcnb_contents"><div><div class="lcnb_contents_inner">' +
                        g + '<div class="lcnb_txt">' + d + ("undefined" != typeof c.excerpt && c.excerpt ? c.excerpt : c.txt) + "</div></div></div></section>") + r + "</div></div></article>";
                    "undefined" != typeof c.link_target && c.link_target && (e = f("<div>" + e + "</div>"), e.find("article a").attr("target", c.link_target), e = e.html());
                    l.find(".lcnb_inner").append(e);
                    k && l.find(".lcnb_news").last().lcnb_preload_img();
                    if (b == n.news_count - 1) {
                        if (h.carousel) {
                            e = l.find(".lcnb_inner");
                            u = e.find(".lcnb_news");
                            q = u.clone();
                            u = u.length;
                            q = f("<div></div>").append(q);
                            e.prepend(q.html());
                            e.append(q.html());
                            for (a = 0; a < u; a++) e.find(".lcnb_news:eq(" + a + "), .lcnb_news:eq(" + (a + 2 * u) + ")").addClass("lcnb_clone");
                            e.find(".lcnb_clone").lcnb_preload_img()
                        }
                        G();
                        X();
                        h.touchswipe && K()
                    }
                })
            },
            X = function() {
                var b = l.data("lcnb_settings"),
                    c = l.data("lcnb_vars");
                l.find(".lcnb_wrap").removeClass("lcnb_loading");
                l.find(".lcnb_cmd").css("opacity", 1);
                l.find(".lcnb_news").not(".lcnb_clone").each(function(e, g) {
                    var k = f(this);
                    setTimeout(function() {
                        k.css({
                            opacity: 1,
                            top: 0
                        })
                    }, 200 * e);
                    setTimeout(function() {
                        c.is_shown = !0
                    }, 300 * b.news_per_time)
                });
                l.find(".lcnb_clone").css({
                    opacity: 1,
                    top: 0
                });
                b.autoplay && !1 === c.is_playing && lcnb_start_slideshow(l)
            },
            U = function(b, c) {
                return c || "undefined" == typeof b.object.attachments ? "" : "album" == b.object.attachments[0].objectType ? b.object.attachments[0].thumbnails[0].image.url : "video" == b.object.attachments[0].objectType ? b.object.attachments[0].image.url : "undefined" == typeof b.object.attachments[0].fullImage.url || "" == b.object.attachments[0].fullImage.url ? b.actor.image.url.replace("?sz=50",
                    "") : b.object.attachments[0].fullImage.url
            };
        f.fn.lcnb_preload_img = function() {
            this.each(function() {
                var b = !1;
                f(this).find(".lcnb_img").each(function() {
                    var c = f(this);
                    b || (b = c.parents(".lcnb_wrap").length ? c.parents(".lcnb_wrap") : f('[data-lcnb-id="' + c.parents(".lcnb_mfp").attr("data-lcnb-instance") + '"]').find(".lcnb_wrap"));
                    var e = f(this).find("figure").css("background-image");
                    if (!e) return !0;
                    e = e.replace("url(", "").replace(")", "").replace(/"/gi, "");
                    f("<img />").bind("load", function() {
                        c.removeClass("lcnb_loading_img");
                        c.parents(".lcnb_exp_block").length && L(b)
                    }).attr("src", e)
                })
            })
        };
        var Q = function(b) {
                var c = new Date(b);
                if (h.elapsed_time) b = Math.ceil(((new Date).getTime() - c.getTime()) / 1E3), 60 > b ? b = b + " " + h.elapsed_names[1] : 60 <= b && 120 > b ? b = "1 " + h.elapsed_names[2] : 3600 > b ? (b = Math.floor(b / 60), b = b + " " + h.elapsed_names[3]) : 3600 <= b && 7200 > b ? b = "1 " + h.elapsed_names[4] : 86400 > b ? (b = Math.floor(b / 60 / 60), b = b + " " + h.elapsed_names[5]) : 86400 <= b && 172800 > b ? b = "1 " + h.elapsed_names[6] : 604800 > b ? (b = Math.floor(b / 60 / 60 / 24), b = b + " " + h.elapsed_names[7]) :
                    604800 <= b && 1209600 > b ? b = "1 " + h.elapsed_names[8] : 2592E3 > b ? (b = Math.floor(b / 60 / 60 / 24 / 7), b = b + " " + h.elapsed_names[9]) : 2592E3 <= b && 5184E3 > b ? b = "1 " + h.elapsed_names[10] : (b = Math.floor(b / 60 / 60 / 24 / 30), b = b + " " + h.elapsed_names[11]), b = b + " " + h.elapsed_names[0];
                else {
                    b = h.date_format;
                    if (-1 < b.indexOf("SS")) {
                        var e = 10 > c.getSeconds() ? "0" : "";
                        b = b.replace("SS", e + c.getSeconds())
                    } - 1 < b.indexOf("MM") && (e = 10 > c.getMinutes() ? "0" : "", b = b.replace("MM", e + c.getMinutes())); - 1 < b.indexOf("HHH") ? (e = 12 <= c.getHours() ? "PM" : "AM", b = b.replace("HHH",
                        c.getHours() % 12 + " " + e)) : -1 < b.indexOf("HH") ? (e = 10 > c.getHours() ? "0" : "", b = b.replace("HH", e + c.getHours())) : -1 < b.indexOf("H") && (b = b.replace("H", c.getHours())); - 1 < b.indexOf("dddd") ? b = b.replace("dddd", h.full_d_names[c.getDay()]) : -1 < b.indexOf("ddd") ? b = b.replace("ddd", h.short_d_names[c.getDay()]) : -1 < b.indexOf("dd") ? (e = 10 > c.getDate() ? "0" : "", b = b.replace("dd", e + c.getDate())) : -1 < b.indexOf("d") && (b = b = b.replace("d", c.getDate())); - 1 < b.indexOf("mmmm") ? b = b.replace("mmmm", h.full_m_names[c.getMonth()]) : -1 < b.indexOf("mmm") ?
                        b = b.replace("mmm", h.short_m_names[c.getMonth()]) : -1 < b.indexOf("mm") ? (e = 10 > c.getMonth() + 1 ? "0" : "", b = b.replace("mm", e + (c.getMonth() + 1))) : -1 < b.indexOf("m") && (b = b.replace("m", c.getMonth() + 1)); - 1 < b.indexOf("yyyy") ? b = b.replace("yyyy", c.getFullYear()) : -1 < b.indexOf("yy") && (c = c.getFullYear().toString(), b = b.replace("yy", c.substr(2)))
                }
                return b
            },
            G = function(b) {
                var c = l.data("lcnb_settings"),
                    e = l.data("lcnb_vars");
                if ("undefined" == typeof e) return !1;
                var g = l.find(".lcnb_wrap"),
                    k = g.find(".lcnb_news"),
                    d = "undefined" == typeof b ?
                    c.news_per_time : b;
                e.news_count <= d ? g.removeClass("lcnb_has_cmd") : g.addClass("lcnb_has_cmd");
                b = "";
                var h = g.attr("id"),
                    m = "#" + h;
                f("#" + h + "-css").remove();
                var p = g.hasClass("lcnb_horizontal"),
                    q = g.hasClass("lcnb_uniblock"),
                    u = Math.round(g.width()),
                    n = c.height,
                    r = q ? w(k.first().css("border-left-width")) : 0,
                    v = q ? 0 : w(k.first().css("margin-left")),
                    E = q ? 0 : w(k.first().css("margin-right"));
                v += E;
                var z = q ? w(k.first().css("border-top-width")) : 0;
                E = q ? 0 : w(k.first().css("margin-top"));
                var t = q ? 0 : w(k.first().css("margin-bottom"));
                E += t;
                if (p) {
                    var D = u / d - v;
                    if (D < c.min_news_w && 1 < d) return G(d - 1), !1;
                    D = Math.floor(D);
                    n = d * (D + v);
                    q && (n -= r * (d - 1));
                    u > n && (b += m + " {max-width: " + (Math.round(g.outerWidth()) - (u - n)) + "px !important;}");
                    e.news_w = D
                } else {
                    var B = n / d - E;
                    if (B < c.min_news_h && 1 < d) return G(d - 1), !1;
                    B = Math.floor(B);
                    u = d * (B + E);
                    q && (u -= z * (d - 1));
                    n > u && (b += m + ":not(.lcnb_expanded_mode), " + m + ":not(.lcnb_expanded_mode) .lcnb_inner_wrapper {max-height: " + (Math.round(g.outerHeight()) - (n - u)) + "px;}");
                    e.news_h = B
                }
                e.news_to_show = d;
                p ? b = b + (m + " .lcnb_contents {max-height: none;}") +
                    (m + " .lcnb_contents > * {height: auto;}") : (u = B - (k.outerHeight(!0) - k.height()), b += m + " .lcnb_contents {max-height: " + u + "px;}", k.find(".lcnb_btm_bar, .lcnb_top_bar").outerHeight(!0), k.find(".lcnb_contents").outerHeight(!0), k.find(".lcnb_contents").height());
                b += m + " .lcnb_news_overflow {height: " + c.height + "px;}";
                b += p ? m + " .lcnb_news {width: " + D + "px;}" : m + " .lcnb_news {height: " + B + "px;}";
                c.horiz_img_h && !c.horiz_img_mode && (b += m + ".lcnb_horizontal .lcnb_img {height: " + c.horiz_img_h + "px;}");
                c.vert_img_w && (b +=
                    m + ".lcnb_vertical .lcnb_img {width: " + c.vert_img_w + "px; max-width: " + c.vert_img_w + "px;}");
                c.exp_in_lightbox && (b += '.lcnb_exp_in_lb[data-lcnb-instance="' + e.box_id + '"] .mfp-content {width: calc(' + c.exp_lb_w + " - 130px); max-width: calc(" + c.exp_lb_max_w + "px - 130px);}");
                d < e.news_count && (k = p ? D : B, d = p ? v : E, ublock_border_trick = q ? r : 0, c.carousel ? (q = 3 * k * e.news_count + 3 * d * e.news_count - ublock_border_trick * (3 * e.news_count - 1), e = (k + d) * e.news_count - ublock_border_trick * e.news_count, b += p ? m + " .lcnb_inner {width: " + q + "px; margin-left: -" +
                    e + "px;}" : m + " .lcnb_inner {height: " + q + "px !important; margin-top: -" + e + "px;}") : (q = k * e.news_count + d * e.news_count - ublock_border_trick * (e.news_count - 1), b += p ? m + " .lcnb_inner {width: " + q + "px;}" : m + " .lcnb_inner {height: " + q + "px !important;}"));
                f("head").append('<style type="text/css" id="' + h + '-css">' + b + "</style>");
                p && c.horiz_img_mode && g.find(".lcnb_h_img_mode").each(function() {
                    f(this).find(".lcnb_img").css("bottom", f(this).find(".lcnb_contents_wrap").outerHeight())
                });
                setTimeout(function() {
                    Y()
                }, 50);
                var A = -1 !== navigator.appVersion.indexOf("MSIE 10") ? !0 : !1;
                c = -1 !== navigator.userAgent.indexOf("Trident") && -1 !== navigator.userAgent.indexOf("rv:11") ? !0 : !1;
                g = navigator.userAgent.toLowerCase();
                var C = -1 !== g.indexOf("safari/") && -1 !== g.indexOf("windows") && -1 === g.indexOf("chrom") ? !0 : !1;
                f("#lcnb-old-ie-css-fix").length || !A && !c || f("head").append('<style type="text/css" id="lcnb-old-ie-css-fix">.lcnb_vertical .lcnb_news_inner .lcnb_img img {min-height: 100% !important; position: relative !important;}</style>');
                !f("#lcnb-ie11-vb-socials-css-fix").length &&
                    c && f("head").append('<style type="text/css" id="lcnb-ie11-vb-socials-css-fix">.lcnb_vertical .lcnb_buttons .lcnb_social_box {transform: translateY(0);}</style>');
                setTimeout(function() {
                    !f("#" + h + "-ie10-vb-css-fix").length && f("#" + h + " .lcnb_buttons > div").length && (A || C) && f("head").append('<style type="text/css" id="' + h + '-ie10-vb-css-fix">#' + h + " .lcnb_buttons > div  {display: inline-block;height: " + f("#" + h + " .lcnb_news").first().height() / 3 + "px;}</style>")
                }, 50)
            },
            Y = function() {
                var b = l.find(".lcnb_wrap"),
                    c = l.data("lcnb_settings"),
                    e = l.data("lcnb_vars"),
                    g = l.find(".lcnb_news").first().height() - 17;
                l.find(".lcnb_news").not(".lcnb_clone").each(function() {
                    var k = parseInt(f(this).attr("rel"), 10),
                        d = f(this),
                        h = g;
                    $incl_clones = b.find(".lcnb_news[rel=" + k + "]");
                    author = d.find(".lcnb_txt .lcnb_author").length ? d.find(".lcnb_txt .lcnb_author").clone().wrap("<div>").parent().html() : "";
                    d.find(".lcnb_txt *:empty, .lcnb_txt iframe").not("br, img, i").remove();
                    var m = d.find(".lcnb_txt");
                    "undefined" == typeof e.orig_texts[k] &&
                        (e.orig_texts[k] = m.html());
                    d.find(".lcnb_shorten").length && (m = e.excerpts[k] ? author + e.excerpts[k] : e.orig_texts[k], $incl_clones.find(".lcnb_txt").html(m).removeClass("lcnb_shorten"));
                    b.hasClass("lcnb_horizontal") ? (d.find(".lcnb_img").length && (h -= d.find(".lcnb_img").outerHeight(!0)), d.find(".lcnb_btm_bar, .lcnb_top_bar").length && (h -= d.find(".lcnb_btm_bar, .lcnb_top_bar").outerHeight(!1)), m = Math.round(d.find(".lcnb_contents").height())) : (m = parseInt(d.find(".lcnb_contents_inner").outerHeight(), 10), h -=
                        w(d.find(".lcnb_contents").css("padding-bottom")), d.find(".lcnb_title").length && (h -= parseInt(d.find(".lcnb_title").outerHeight(!0), 10)), d.find(".lcnb_btm_bar, .lcnb_top_bar").length && (h -= parseInt(d.find(".lcnb_btm_bar, .lcnb_top_bar").outerHeight(!0), 10)));
                    if (h >= m) return !0;
                    author && d.find(".lcnb_txt .lcnb_author").remove();
                    "undefined" != typeof e.clean_texts[k] ? m = e.clean_texts[k] : (d.find(".lcnb_txt *").not("a, p, br, i, iframe").each(function() {
                            var b = f(this).contents();
                            f(this).replaceWith(b)
                        }), d.find(".lcnb_txt *").lcnb_remove_all_attr(),
                        m = d.find(".lcnb_txt").html(), e.clean_texts[k] = m);
                    for (var l = m.split(" "), q = "", n = "", r = m = 0; m < h && r < l.length;)
                        if ("undefined" != typeof l[r]) {
                            n = q;
                            q = q + l[r] + " ";
                            d.find(".lcnb_txt").html(author + q + '<span class="lcnb_read_more">' + c.read_more_txt + "</span>");
                            for (x = 0; 2 > x; x++) d.find(".lcnb_txt > *:first").is("br") && d.find(".lcnb_txt > *:first").remove(), d.find(".lcnb_txt br").each(function() {
                                f(this).prev().is("p") && f(this).remove()
                            });
                            for (; - 1 != d.find(".lcnb_txt").html().indexOf('<br> <span class="lcnb_read_more">');) d.find(".lcnb_read_more").prev().remove();
                            m = b.hasClass("lcnb_horizontal") ? d.find(".lcnb_contents").height() : d.find(".lcnb_txt").height();
                            r++
                        } var v = ["a", "p", "i"];
                    f.each(v, function(b, e) {
                        var g = n.match("<" + e, "g"),
                            k = n.match("</" + e, "g");
                        null != g && (null != g && null == k || g.length > k.length) && (n = n + "</" + e + ">");
                        if (b == v.length - 1) {
                            d.find(".lcnb_txt").html(author + n + '<span class="lcnb_read_more">' + c.read_more_txt + "</span>");
                            d.find(".lcnb_txt *:empty").not("br").remove();
                            for (x = 0; 2 > x; x++) d.find(".lcnb_txt > *:first").is("br") && d.find(".lcnb_txt > *:first").remove(),
                                d.find(".lcnb_txt br").each(function() {
                                    f(this).next().is("br") && f(this).next().remove();
                                    f(this).prev().is("p") && f(this).remove()
                                });
                            for (; - 1 != d.find(".lcnb_txt").html().indexOf('<br> <span class="lcnb_read_more">');) d.find(".lcnb_read_more").prev().remove()
                        }
                    });
                    d.find(".lcnb_txt p").last().replaceWith(d.find(".lcnb_txt p").last().html());
                    h = d.find(".lcnb_txt").html();
                    b.find(".lcnb_clone[rel=" + k + "]").find(".lcnb_txt").html(h);
                    $incl_clones.find(".lcnb_txt").addClass("lcnb_shorten")
                })
            };
        f.fn.lcnb_remove_all_attr =
            function() {
                return this.each(function() {
                    var b = f.map(this.attributes, function(b) {
                            return b.name
                        }),
                        c = f(this);
                    f.each(b, function(b, g) {
                        "href" != g && "target" != g && c.removeAttr(g)
                    })
                })
            };
        var R = function() {
                var b = l.data("lcnb_settings"),
                    c = l.find(".lcnb_wrap"),
                    e = b.min_horiz_w < b.min_news_w ? b.min_news_w : b.min_horiz_w;
                c.width() < e ? c.hasClass("lcnb_horizontal") && (c.removeClass("lcnb_horizontal").addClass("lcnb_vertical"), n.news_to_show = b.news_per_time, b.touchswipe && K(!0)) : "horizontal" != b.layout || c.hasClass("lcnb_horizontal") ||
                    (c.removeClass("lcnb_vertical").addClass("lcnb_horizontal"), n.news_to_show = b.news_per_time, b.touchswipe && K(!0));
                return !0
            },
            M = function(b) {
                var c = b.data("lcnb_vars"),
                    e = f(".lcnb_wrap", b);
                b = f(".lcnb_news", b).first();
                e.hasClass("lcnb_horizontal") ? (c = c.news_w + w(b.css("margin-left")) + w(b.css("margin-right")), e.hasClass("lcnb_uniblock") && (c -= w(e.find(".lcnb_news").css("border-left-width")))) : (c = c.news_h + w(b.css("margin-top")) + w(b.css("margin-bottom")), e.hasClass("lcnb_uniblock") && (c -= w(e.find(".lcnb_news").css("border-top-width"))));
                return c
            };
        lcnb_news_slide = function(b, c, e, g) {
            var k = b.data("lcnb_vars"),
                d = b.data("lcnb_settings"),
                h = f(".lcnb_wrap", b),
                m = f(".lcnb_inner", b);
            h = h.hasClass("lcnb_horizontal") ? !0 : !1;
            var l = M(b),
                q = 0 == d.slideshow_time && k.is_playing ? "linear" : "swing";
            g = "undefined" != typeof g ? 350 : d.animation_time;
            k.is_expanded && (g = 0);
            if (k.is_moving || k.news_to_show >= k.news_count || !d.carousel && (1 === k.first_shown && "prev" == c || k.first_shown + k.news_to_show > k.news_count && "next" == c)) return !1;
            "undefined" == typeof e && (e = 1);
            !d.carousel && "next" ==
                c && k.first_shown + e + k.news_to_show - 1 > k.news_count && (e -= k.first_shown + e + k.news_to_show - 1 - k.news_count);
            var n = l * e;
            l = d.carousel ? k.news_count * l * -1 : k.curr_box_margin;
            new_margin = "next" == c ? l - n : l + n;
            k.curr_box_margin = new_margin;
            0 < new_margin && (new_margin = 0);
            d.carousel || (k.first_shown = "next" == c ? k.first_shown + e : k.first_shown - e, 1 > k.first_shown && (k.first_shown = 1), k.first_shown > k.news_count - k.news_to_show && (k.first_shown = k.news_count - k.news_to_show + 1));
            h ? m.clearQueue().animate({
                "margin-left": new_margin
            }, g, q) : m.clearQueue().animate({
                    "margin-top": new_margin
                },
                g, q);
            k.is_expanded && (h = f(".lcnb_inner_wrapper", b), "next" == c ? (q = h.find(".expanded").next(".lcnb_news"), N(h, q, !0)) : (q = h.find(".expanded").prev(".lcnb_news"), N(h, q, !0)));
            d.carousel || Z(b);
            k.is_moving = !0;
            setTimeout(function() {
                k.is_moving = !1;
                if (d.carousel) {
                    if ("next" == c) {
                        m.find(".lcnb_clone").slice(k.news_count, k.news_count + e).removeClass("lcnb_clone");
                        m.find(".lcnb_news").not(".lcnb_clone").slice(0, e).addClass("lcnb_clone");
                        var b = m.find(".lcnb_clone").slice(0, e);
                        m.append(b)
                    } else m.find(".lcnb_clone").slice(k.news_count -
                        e, k.news_count).removeClass("lcnb_clone"), m.find(".lcnb_news").not(".lcnb_clone").slice(k.news_count - e, k.news_count).addClass("lcnb_clone"), b = m.find(".lcnb_clone").slice(m.find(".lcnb_clone").length - e, m.find(".lcnb_clone").length), m.prepend(b);
                    b = m.height();
                    m.stop().removeAttr("style");
                    m.css("height", b)
                }
            }, g ? g - 10 : 0)
        };
        var Z = function(b) {
            var c = b.data("lcnb_vars"),
                e = b.find(".lcnb_wrap");
            c.news_to_show >= c.news_count ? e.removeClass("lcnb_has_cmd") : e.addClass("lcnb_has_cmd");
            1 === c.first_shown ? (f(".lcnb_prev",
                b).addClass("lcnb_disabled"), f(".lcnb_next", b).removeClass("lcnb_disabled")) : c.first_shown + c.news_to_show <= c.news_count ? f(".lcnb_prev, .lcnb_next", b).removeClass("lcnb_disabled") : (f(".lcnb_prev", b).removeClass("lcnb_disabled"), f(".lcnb_next", b).addClass("lcnb_disabled"))
        };
        lcnb_start_slideshow = function(b, c) {
            "undefined" != typeof c && (b = b.parents(".lcnb_wrap").parent());
            var e = b.data("lcnb_vars"),
                g = b.data("lcnb_settings"),
                f = 0 != g.slideshow_time || e.is_shown ? 0 : 1200,
                d = g.slide_all && 0 < g.slideshow_time ? e.news_to_show :
                1;
            if (e.is_expanded || e.is_playing) return !0;
            0 == g.slideshow_time && setTimeout(function() {
                e.is_playing = !0;
                lcnb_news_slide(b, "next", d)
            }, f);
            setTimeout(function() {
                e.is_playing = setInterval(function() {
                    lcnb_news_slide(b, "next", g.slide_all && 0 < g.slideshow_time ? e.news_to_show : 1)
                }, g.slideshow_time + g.animation_time)
            }, f + 10)
        };
        var C = function(b, c) {
            "undefined" == typeof c && (b = b.parents(".lcnb_wrap").parent());
            var e = b.data("lcnb_vars"),
                g = b.data("lcnb_settings");
            clearInterval(e.is_playing);
            e.is_playing = null;
            if (g.autoplay &&
                0 == g.slideshow_time && 1800 < g.animation_time) {
                var f = g.animation_time;
                g.animation_time = 1800;
                setTimeout(function() {
                    g.animation_time = f
                }, 200)
            }
        };
        if (h.autoplay && h.pause_on_hover) l.on("mouseenter", ".lcnb_inner_wrapper", function() {
            f(this).parents(".lcnb_wrap").parent().lcsb_stop_slideshow()
        }).on("mouseleave", ".lcnb_inner_wrapper", function() {
            f(this).parents(".lcnb_wrap").parent().lcsb_start_slideshow()
        });
        var S = function(b) {
                var c = f("<div/>");
                c.append('<div id="lcnb_util_2" style="display: none !important;">' +
                    b + "</div>");
                c.find("*").not("iframe").each(function() {
                    var b = f(this).contents();
                    f(this).replaceWith(b)
                });
                b = c.text().replace(/[^ -~]/g, "").substring(0, 117);
                return encodeURIComponent(b).replace(/'/g, "\\'")
            },
            P = function(b, c) {
                var e = l.data("lcnb_settings"),
                    g = f("<div />").append(c.txt);
                g.find(".lcnb_author, iframe").remove();
                g.find("*").not("a, iframe").each(function() {
                    var b = f(this).contents();
                    f(this).replaceWith(b)
                });
                g = g.html();
                var h = encodeURIComponent(c.title).replace(/'/g, "\\'");
                encodeURIComponent(g.substring(0,
                    1E3)).replace(/'/g, "\\'");
                var d = "undefined" == typeof c.s_link || "" == c.s_link ? encodeURIComponent(location.href) : encodeURIComponent(c.s_link),
                    n = "undefined" == typeof c.img || "" == c.img ? "" : encodeURIComponent(c.img);
                s_fb_image = n ? "&picture=" + e.fb_share_fix + "?u=" + n.replace(/'/g, "\\'") : "";
                e = '<div class="lcnb_social_trigger noSwipe" title="share"><ul class="lcnb_social_box">' + ('<li class="lcnb_share_fb" title="share on Facebook" onClick="window.open(\'https://www.facebook.com/sharer/sharer.php?u=' + d + "&display=popup','sharer','toolbar=0,status=0,width=548,height=325');\"></li>");
                e = "twitter" == b ? e + ('<li class="lcnb_share_tw lcnb_retweet" title="share on Twitter" onClick="window.open(\'https://twitter.com/intent/retweet?tweet_id=' + c.tweet_id + "&amp;via=" + c.user_id + "','sharer','toolbar=0,status=0,width=548,height=325');\" ontouchstart=\"window.open('https://twitter.com/intent/retweet?tweet_id=" + c.tweet_id + "&amp;via=" + c.user_id + "','sharer','toolbar=0,status=0,width=548,height=325');\"></li>") : e + ('<li class="lcnb_share_tw" title="share on Twitter" onClick="window.open(\'https://twitter.com/share?text=' +
                    S(g) + "&amp;url=" + d + "','sharer','toolbar=0,status=0,width=548,height=325');\" ontouchstart=\"window.open('https://twitter.com/share?text=" + S(g) + "&amp;url=" + d + "','sharer','toolbar=0,status=0,width=548,height=325');\"></li>");
                e += '<li class="lcnb_share_pt" onClick="window.open(\'http://pinterest.com/pin/create/button/?url=' + d + "&media=" + n + "&description=" + h + "','sharer','toolbar=0,status=0,width=575,height=330');\" href=\"javascript: void(0)\"></li>";
                e = "undefined" != typeof c.s_link && "" != c.s_link ? e + ('<li class="lcnb_share_gg" title="share on Google+" onClick="window.open(\'https://plus.google.com/share?url=' +
                    d + "','sharer','toolbar=0,status=0,width=548,height=325');\" ontouchstart=\"window.open('https://plus.google.com/share?url=" + d + "','sharer','toolbar=0,status=0,width=548,height=325');\"></li>") : e + "<li></li>";
                return e + "</ul></div>"
            };
        f.fn.lcnb_toggle_socials = function(b) {
            return this.each(function() {
                f(this);
                f(this).parents(".lcnb_news");
                var c = f(this).find(".lcnb_social_box");
                if ("undefined" != typeof b) return c.parent(".lcnb_social_trigger").removeClass("socials_shown"), !0;
                c.parent(".lcnb_social_trigger").toggleClass("socials_shown")
            })
        };
        f(".lcnb_social_trigger").unbind("click");
        l.delegate(".lcnb_social_trigger", n.event_type, function() {
            var b = f(this);
            "undefined" != typeof lcnb_one_click && clearTimeout(lcnb_one_click);
            lcnb_one_click = setTimeout(function() {
                C(b);
                b.lcnb_toggle_socials();
                b.parents(".lcnb_wrap").find(".lcnb_social_trigger").not(b).lcnb_toggle_socials(!0)
            }, 20)
        });
        f(document).undelegate(".lcnb_mfp .lcnb_social_trigger", n.event_type);
        f(document).delegate(".lcnb_mfp .lcnb_social_trigger", n.event_type, function() {
            var b = f(this);
            "undefined" !=
            typeof lcnb_one_click && clearTimeout(lcnb_one_click);
            lcnb_one_click = setTimeout(function() {
                b.lcnb_toggle_socials()
            }, 20)
        });
        f(document).undelegate(".lcnb_linked_img", n.event_type);
        f(document).delegate(".lcnb_linked_img", n.event_type, function() {
            var b = f(this).parent();
            window.open(b.data("link"), b.data("link-target"))
        });
        var T = function(b, c, e) {
                b.data("lcnb_vars");
                var g = b.data("lcnb_settings"),
                    h = "undefined" != typeof e.exp_img_pos && e.exp_img_pos ? e.exp_img_pos : g.exp_main_img_pos;
                b.find(".lcnb_news").removeClass("expanded");
                c.addClass("expanded");
                var d = e.img ? !0 : !1;
                if ("hidden" == h || "inside" == h) d = !1;
                b = d && "undefined" != typeof c.find(".lcnb_img").attr("data-mfp-src") ? 'data-mfp-src="' + c.find(".lcnb_img").attr("data-mfp-src") + '"' : "";
                var l = d ? '<div class="lcnb_img lcnb_exp_main_img" ' + b + ">" + c.find(".lcnb_img").html().replace("lcnb_expand_trig", "") + "</div>" : "";
                b = d ? "" : "lcnb_only_text";
                d && l && (l = f(l), c.find(".lcnb_img").hasClass("lcnb_no_lightbox") && l.find(".lcnb_img_lb, .lcnb_video_lb").remove(), l = l.clone().wrap("<div>").parent().html());
                d = g.social_share ? P(e.type, e) : "";
                d = '<div class="lcnb_exp_data">' + (g.read_more_btn || -1 !== f.inArray("date", g.hide_elements) ? "" : '<div class="lcnb_exp_date"><div class="lcnb_btn_time"><time class="lcnb_date">' + Q(e.date) + "</time></div></div>") + d + ("undefined" != typeof e.link && "" != e.link ? '<div class="lcnb_link"><a href="' + ("soundcloud" == e.type ? e.s_link : e.link) + '" target="_blank"></a></div>' : "") + "</div>";
                var m = e.title ? c.find(".lcnb_title").clone().removeAttr("style").wrap("<div>").parent().html() : "",
                    n = e.txt.replace(/fake-src="/g,
                        'src="');
                "inside" == h && e.img && (n = '<p><img src="' + e.img + '" class="lcnb_exp_main_img" /></p>' + n);
                g.manage_exp_images && (n = aa(n, g, c, e));
                return '<div class="lcnb_exp_block noSwipe ' + b + '" data-news-id="' + c.attr("rel") + '"><span class="lcnb_close"></span>' + l + '<div class="lcnb_exp_txt">' + m + n + '</div><div class="lcnb_exp_clearboth"></div>' + d + "</div>"
            },
            N = function(b, c, e) {
                var g = b.parents(".lcnb_wrap").parent(),
                    f = g.data("lcnb_vars"),
                    d = g.data("lcnb_settings");
                if (f.is_expanded && "undefined" == typeof e) return !1;
                f.is_expanded = !0;
                var h = f.sorted_news[c.attr("rel") - 1];
                f = T(g, c, h);
                if (d.exp_in_lightbox) return ba(g, c, f), !1;
                g.find(".lcnb_wrap, .lcnb_inner_wrapper").addClass("lcnb_expanded_mode");
                "undefined" != typeof e && (b.find(".lcnb_exp_block").last().css("z-index", 150).fadeTo(300, 0), setTimeout(function() {
                    b.find(".lcnb_exp_block").last().remove()
                }, 300));
                b.css("position", "relative").prepend(f);
                d.boxed_news ? (c = b.find(".lcnb_exp_block").first(), c = w(c.css("margin-top")) + w(c.css("margin-bottom")), d = d.height - c) : d = d.height;
                b.find(".lcnb_exp_block").first().css("min-height",
                    d);
                b.find(".lcnb_exp_block").lcnb_preload_img();
                "undefined" == typeof e && b.find(".lcnb_news_overflow").clearQueue().animate({
                    opacity: 0,
                    top: "80%"
                }, 500);
                setTimeout(function() {
                    "undefined" != typeof h.link_target && h.link_target && b.find(".lcnb_exp_block a").attr("target", h.link_target);
                    b.find(".lcnb_exp_block").clearQueue().animate({
                        opacity: 1,
                        top: 0
                    }, 400);
                    setTimeout(function() {
                        L(b.parents(".lcnb_wrap"))
                    }, 200)
                }, 100);
                setTimeout(function() {
                    b.find(".lcnb_exp_txt").fadeIn(200)
                }, 400)
            },
            ba = function(b, c, e) {
                var g = b.data("lcnb_vars"),
                    h = b.data("lcnb_settings"),
                    d = c.attr("rel");
                if ("function" != typeof f.fn.magnificPopup) return console.error("Magnific Popup not found"), !1;
                var l = [];
                f.each(g.sorted_news, function(c, f) {
                    if (c == d - 1) var g = e;
                    else g = b.find(".lcnb_news[rel=" + (c + 1) + "]"), g = T(b, g, f), console.log(g);
                    l.push({
                        src: g
                    })
                });
                f.magnificPopup.open({
                    type: "inline",
                    items: l,
                    gallery: {
                        enabled: !0
                    },
                    closeBtnInside: !1,
                    removalDelay: 300,
                    mainClass: "lcnb_mfp lcnb_exp_in_lb lcnb_" + h.theme + "_theme",
                    callbacks: {
                        change: function() {
                            setTimeout(function() {
                                    f(".lcnb_exp_in_lb .lcnb_exp_block").lcnb_preload_img()
                                },
                                50)
                        },
                        close: function() {
                            g.is_expanded = !1;
                            h.autoplay && h.autop_after_exp && lcnb_start_slideshow(b.find(".lcnb_news").first(), !0)
                        }
                    }
                }, d - 1);
                f(".lcnb_exp_in_lb").attr("data-lcnb-instance", g.box_id)
            };
        l.delegate(".lcnb_btn_expand, .lcnb_expand_trig", n.event_type, function() {
            var b = f(this).parents(".lcnb_wrap").parent().data("lcnb_vars"),
                c = f(this).parents(".lcnb_news"),
                e = f(this).parents(".lcnb_inner_wrapper");
            b.paused_on_h = !1;
            C(f(this));
            e.find(".socials_shown").lcnb_toggle_socials(!0);
            N(e, c);
            b = e.offset();
            f(window).scrollTop() >
                b.top - 20 && f("html, body").animate({
                    scrollTop: b.top - 10
                }, 600, "linear")
        });
        var aa = function(b, c, e, g) {
                b = f('<div class="outer_wrap">' + b + "</div>");
                b.find("img").each(function(b, g) {
                    for (; f(this).parent().not(".outer_wrap").length;) f(this).unwrap();
                    var d = f(this),
                        h = (d = c.lightbox ? J(d.attr("src"), "src") : "") ? 'data-mfp-src="' + d + '"' : "",
                        k = h ? "lcnb_img_lb" : "";
                    f(this).hasClass("lcnb_exp_main_img") && c.lightbox && e.find(".lcnb_video_lb").length && (d = e.find(".lcnb_img").data("mfp-src"), h = 'data-mfp-src="' + d + '"', k = "lcnb_video_lb");
                    d = c.exp_img_on_row ? "lcnb_exp_img_on_row" : "";
                    h = '<div class="lcnb_img lcnb_loading_img" ' + h + ">" + (h ? '<div class="lcnb_img_ol ' + k + '"></div>' : "") + "<figure style=\"background-image: url('" + f(this).attr("src") + '\');"></figure><img src="' + f(this).attr("src") + '" /></div>';
                    f(this).replaceWith('<div class="lcnb_exp_body_img ' + d + '">' + h + "</div>")
                });
                b.find("*:empty").not("br, img, i, iframe, .lcnb_exp_body_img *").remove();
                b.find(".lcnb_exp_body_img img").addClass("lcnb_exp_man_img");
                var h = g.exp_img_w ? g.exp_img_w :
                    c.exp_img_w;
                g = g.exp_img_h ? g.exp_img_h : c.exp_img_h;
                225 != g && b.find(".lcnb_exp_body_img .lcnb_img").css("height", g);
                "auto" == g && b.find(".lcnb_exp_body_img .lcnb_img").addClass("lcnb_exp_body_img_auto_h");
                b.find(".lcnb_exp_body_img").addClass("lcnb_exp_img_" + h);
                return b.html()
            },
            L = function(b) {
                var c = b.parent().data("lcnb_settings"),
                    e = 1 < b.find(".lcnb_exp_txt:first .lcnb_exp_body_img") ? 450 : 350;
                if (b.find(".lcnb_exp_txt").width() < e) {
                    b.find(".lcnb_exp_block").addClass("lcnb_exp_mobile");
                    var g = !0
                } else b.find(".lcnb_exp_block").removeClass("lcnb_exp_mobile"),
                    g = !1;
                setTimeout(function() {
                    var e = b.find(".lcnb_exp_txt").outerHeight(!0) + b.find(".lcnb_exp_clearboth").outerHeight(!0) + (b.find(".lcnb_exp_block ").outerHeight(!1) - b.find(".lcnb_exp_block").height());
                    g && "undefined" != typeof $img_wrap && $img_wrap.length && (e += $img_wrap.find("img").outerHeight(!0));
                    var d = c.boxed_news ? w(b.css("margin-top")) + w(b.css("margin-bottom")) : 0;
                    if (e + d > c.height) {
                        if (b.height() != e + d)
                            if (70 < e + d - c.height) {
                                var f = Math.round((e + d - 400) / 30 * 17);
                                b.clearQueue().animate({
                                    height: e + d
                                }, 400 + f)
                            } else b.clearQueue().animate({
                                height: e +
                                    d
                            }, 400)
                    } else b.height() != c.height && b.clearQueue().animate({
                        height: c.height
                    }, 400)
                }, 300)
            },
            ca = function(b) {
                var c = b.parents(".lcnb_wrap").parent(),
                    e = c.data("lcnb_settings");
                c.data("lcnb_vars").is_expanded = !1;
                var g = b.find(".lcnb_exp_block").height(),
                    h = 70 < g - e.height ? 500 + Math.round(g / 30 * 18) : 500;
                b.parents(".lcnb_wrap").clearQueue().animate({
                    height: e.height
                }, 500);
                if (e.scroll_exp_elem) {
                    var d = b.offset();
                    f(window).scrollTop() > d.top + e.height - 20 && f("html, body").animate({
                        scrollTop: d.top - 10
                    }, 600, "linear")
                }
                b.find(".lcnb_exp_block").clearQueue().animate({
                    top: "-" +
                        (g + 100)
                }, h);
                b.find(".lcnb_exp_block").clearQueue().animate({
                    opacity: 0
                }, 500);
                setTimeout(function() {
                    b.find(".lcnb_news_overflow").clearQueue().animate({
                        opacity: 1,
                        top: 0
                    }, 400)
                }, 100);
                setTimeout(function() {
                    c.find(".lcnb_wrap, .lcnb_inner_wrapper").removeClass("lcnb_expanded_mode");
                    b.find(".lcnb_news").removeClass("expanded");
                    b.find(".lcnb_exp_block").remove();
                    b.css("height", "inherit");
                    e.autoplay && e.autop_after_exp && lcnb_start_slideshow(b.find(".lcnb_news").first(), !0)
                }, 550)
            };
        l.delegate(".lcnb_exp_block .lcnb_close",
            n.event_type,
            function() {
                var b = f(this).parents(".lcnb_inner_wrapper");
                ca(b)
            });
        l.delegate(".lcnb_img_lb:not(.lcnb_expand_trig, .lcnb_linked_img)", "click ontouchstart", function() {
            var b = f(this).parents(".lcnb_wrap").parent().data("lcnb_settings");
            f(this).parents(".lcnb_wrap").parent().data("lcnb_vars").paused_on_h = !1;
            C(f(this));
            var c = f(this).parents(".lcnb_img").attr("data-mfp-src"),
                e = f(this).parents(".lcnb_exp_block").length ? f(this).parents(".lcnb_exp_block").find(".lcnb_img") : f(this).parents(".lcnb_img");
            f(this).parents(".lcnb_img");
            var g = 0,
                h = [];
            e.each(function(b, e) {
                f(this).attr("data-mfp-src") == c && (g = b);
                h.push({
                    src: f(this).attr("data-mfp-src")
                })
            });
            f.magnificPopup.open({
                items: h,
                gallery: {
                    enabled: !0
                },
                type: "image",
                mainClass: "lcnb_mfp mfp-with-zoom lcnb_" + b.theme + "_theme",
                closeOnContentClick: !0,
                closeBtnInside: !1,
                image: {
                    verticalFit: !0
                },
                removalDelay: 300
            }, g)
        });
        l.delegate(".lcnb_video_lb:not(.lcnb_expand_trig, .lcnb_linked_img)", "click ontouchstart", function() {
            C(f(this));
            var b = f(this).parents(".lcnb_wrap").parent().data("lcnb_settings"),
                c = f(this).parents(".lcnb_img").attr("data-mfp-src");
            f.magnificPopup.open({
                items: {
                    src: c
                },
                type: "iframe",
                mainClass: "lcnb_mfp lcnb_" + b.theme + "_theme",
                closeBtnInside: !1,
                removalDelay: 300,
                iframe: {
                    patterns: {
                        youtube: {
                            src: "//www.youtube.com/embed/%id%?autoplay=1&rel=0"
                        }
                    }
                }
            }, 0)
        });
        var K = function(b) {
                if ("function" != typeof f.fn.swipe) return !1;
                "undefined" != typeof b && l.find(".lcnb_touchswipe .lcnb_inner_wrapper").swipe("destroy");
                l.find(".lcnb_touchswipe .lcnb_inner_wrapper").swipe({
                    swipeStatus: function(b, e, g, h, d,
                        n, m, p) {
                        b = f(this);
                        var c = b.parents(".lcnb_wrap").parent();
                        d = b.find(".lcnb_inner");
                        n = c.data("lcnb_settings");
                        m = c.data("lcnb_vars");
                        p = M(c);
                        10 < h && !m.is_moving && (c.find(".lcnb_wrap").hasClass("lcnb_horizontal") ? ("undefined" == typeof b.attr("data-swipe-base") ? (c = w(d.css("margin-left")), b.attr("data-swipe-base", c)) : c = b.attr("data-swipe-base"), c = "right" == g ? -1 * Math.abs(c) + h : c - h, 0 < c && (c = 0), !n.carousel && Math.abs(c) > d.width() - m.news_to_show * p && (c = -1 * (d.width() - m.news_to_show * p)), d.css("margin-left", c), "end" == e &&
                            (e = Math.ceil(Math.abs(h) / m.news_w), lcnb_news_slide(l, "right" == g ? "prev" : "next", e, !0), b.removeAttr("data-swipe-base"))) : ("undefined" == typeof b.attr("data-swipe-base") ? (c = w(d.css("margin-top")), b.attr("data-swipe-base", c)) : c = b.attr("data-swipe-base"), c = "down" == g ? -1 * Math.abs(c) + h : c - h, 0 < c && (c = 0), !n.carousel && Math.abs(c) > d.height() - m.news_to_show * p && (c = -1 * (d.height() - m.news_to_show * p)), d.css("margin-top", c), "end" == e && (e = Math.ceil(Math.abs(h) / m.news_h), lcnb_news_slide(l, "down" == g ? "prev" : "next", e, !0), b.removeAttr("data-swipe-base"))))
                    },
                    threshold: 10
                })
            },
            w = function(b) {
                return parseInt(b, 10)
            },
            J = function(b, c) {
                var e = (new RegExp("[?&]" + c + "=([^&#]*)")).exec(b);
                return null == e ? b : decodeURIComponent(e[1]) || 0
            };
        f(".lcnb_next").unbind("click");
        l.delegate(".lcnb_next:not(.lcnb_disabled)", "click", function() {
            var b = f(this);
            "undefined" != typeof lcnb_one_click && clearTimeout(lcnb_one_click);
            var c = l.data("lcnb_vars"),
                e = l.data("lcnb_settings");
            to_slide = e.slide_all && 0 < e.slideshow_time && !c.is_expanded ? c.news_to_show : 1;
            lcnb_one_click = setTimeout(function() {
                C(b);
                lcnb_news_slide(l, "next", to_slide)
            }, 5)
        });
        f(".lcnb_prev").unbind("click");
        l.delegate(".lcnb_prev:not(.lcnb_disabled)", "click", function() {
            var b = f(this);
            "undefined" != typeof lcnb_one_click && clearTimeout(lcnb_one_click);
            var c = l.data("lcnb_vars"),
                e = l.data("lcnb_settings");
            to_slide = e.slide_all && 0 < e.slideshow_time && !c.is_expanded ? c.news_to_show : 1;
            lcnb_one_click = setTimeout(function() {
                C(b);
                lcnb_news_slide(l, "prev", to_slide)
            }, 5)
        });
        f(window).resize(function() {
            var b = l.data("lcnb_vars"),
                c = l.data("lcnb_settings");
            if (b.box_curr_w == Math.round(l.width())) return !1;
            b.box_curr_w = Math.round(l.width());
            "undefined" != typeof lcnb_resize_tout[b.box_id] && clearTimeout(lcnb_resize_tout[b.box_id]);
            lcnb_resize_tout[b.box_id] = setTimeout(function() {
                R();
                G();
                if (!c.carousel) {
                    var e = l.data("lcnb_vars"),
                        g = f(".lcnb_inner", l),
                        h = M(l) * (e.first_shown - 1) * -1;
                    e.curr_box_margin = h;
                    f(".lcnb_wrap", l).hasClass("lcnb_horizontal") ? g.clearQueue().css("margin-left", h) : g.clearQueue().css("margin-top", h)
                }
                b.is_expanded && L(l.find(".lcnb_wrap"))
            }, 100)
        });
        f(window).scroll(function() {
            "undefined" != typeof lcnb_exp_scroll_tout[n.box_id] && clearTimeout(lcnb_exp_scroll_tout[n.box_id]);
            lcnb_exp_scroll_tout[n.box_id] = setTimeout(function() {
                var b = l.data("lcnb_settings");
                if (l.find(".lcnb_exp_block").length && b.scroll_exp_elem) {
                    var c = l.find(".lcnb_exp_block").first(),
                        e = c.offset();
                    c.height() > b.height + 30 && f(window).scrollTop() > e.top + 30 ? (f(window).scrollTop() < e.top + (c.height() - 35) && (b = Math.floor(f(window).scrollTop() - e.top - 7), c.find(".lcnb_close").css("margin-top",
                        b)), f(window).scrollTop() < e.top + (c.height() - (c.find("> .lcnb_exp_main_img").height() - 25)) && (c.hasClass("lcnb_exp_mobile") ? c.find("> .lcnb_exp_main_img").css("margin-top", 0) : (b = Math.floor(f(window).scrollTop() - e.top), c.find("> .lcnb_exp_main_img").css("margin-top", b)))) : c.find(".lcnb_close, > .lcnb_exp_main_img").css("margin-top", 0)
                }
            }, 60)
        });
        l.attr("data-lcnb-id", n.box_id);
        (function() {
            "undefined" == typeof lcnb_script_basepath && (h.script_basepath ? lcnb_script_basepath = h.script_basepath : f("script").each(function(b,
                c) {
                var e = f(this).attr("src");
                if ("undefined" != typeof e && -1 != e.indexOf("swift-box")) {
                    var g = e.split("/");
                    lcnb_script_basepath = e.replace(g[g.length - 1], "")
                } else return lcnb_script_basepath = "", !1
            }));
            if (h.scripts_man_added) return !0;
            "undefined" == typeof lcnb_loaded_themes && (lcnb_loaded_themes = []); - 1 === f.inArray(h.theme, lcnb_loaded_themes) && (lcnb_loaded_themes.push(h.theme), f("head").append('<link rel="stylesheet" href="' + lcnb_script_basepath + "assets/themes/" + h.theme + '.css">'));
            "undefined" == typeof lcnb_loaded_scripts &&
                (lcnb_loaded_scripts = []);
            h.lightbox && -1 === f.inArray("magnific_popup", lcnb_loaded_scripts) && "function" != typeof f.fn.magnificPopup && (lcnb_loaded_scripts.push("magnific_popup"), f("head").append('<link rel="stylesheet" href="' + lcnb_script_basepath + 'assets/css/magnific-popup-style.css">'), f("body").append('<script src="' + lcnb_script_basepath + 'assets/js/magnific-popup.min.js" type="text/javascript">\x3c/script>'));
            h.touchswipe && -1 === f.inArray("touchswipe", lcnb_loaded_scripts) &&
                "function" != typeof swipe && (lcnb_loaded_scripts.push("touchswipe"), f("body").append('<script src="' + lcnb_script_basepath + 'assets/js/jquery.touchSwipe.min.js" type="text/javascript">\x3c/script>'));
            return !0
        })();
        (function() {
            l.find(".nb_news_wrap").length && l.find(".nb_news_wrap").each(function() {
                var b = f(this);
                img_max_w = parseInt(b.attr("img_max_w"));
                img_max_h = parseInt(b.attr("img_max_h"));
                link_target = "undefined" != typeof b.attr("link_target") ? b.attr("link_target") : !1;
                strip_tags = "undefined" !=
                    typeof b.attr("strip_tags") ? b.attr("strip_tags") : !1;
                remove_tags = "undefined" != typeof b.attr("remove_tags") ? b.attr("remove_tags") : !1;
                b.find("article").each(function(c, e) {
                    img_max_w && img_max_h && f(this).find("section img").each(function() {
                        var b = "undefined" != typeof f(this).attr("lazy-src") ? f(this).attr("lazy-src") : f(this).attr("src");
                        b = lcnb_script_basepath + "php_assets/img_size_check.php?src=" + encodeURIComponent(b) + "&max_w=" + img_max_w + "&max_h=" + img_max_h;
                        f(this).attr("src", b)
                    });
                    var g = f(this).attr("datetime"),
                        k = f(this).find("header").text(),
                        d = f(this).find("section").lcnb_unselfclose_iframes().html(),
                        l = f(this).children("blockquote").length ? f(this).children("blockquote").html() : "",
                        m = f(this).find(".lcnb_inline_link").attr("href"),
                        p = f(this).find(".lcnb_video").attr("src");
                    f(this).find(".lcnb_inline_link").remove();
                    $main_img = f(this).find("img.lcnb_main_img").length ? f(this).find("img.lcnb_main_img") : f(this).children("img");
                    var q = "undefined" != typeof $main_img.attr("lazy-src") ? $main_img.attr("lazy-src") : $main_img.attr("src");
                    q = $main_img.length ? V(q, img_max_w, img_max_h) : "";
                    if (strip_tags || remove_tags) d = A(d, !1, !1, strip_tags, remove_tags).txt;
                    if ("undefined" != typeof g && "undefined" != typeof d && "" != f.trim(d)) {
                        g = {
                            type: "inline",
                            time: (new Date(g)).getTime(),
                            date: g,
                            title: k,
                            txt: d,
                            excerpt: l,
                            link: m,
                            s_link: m,
                            img: q,
                            video: p,
                            link_target: link_target,
                            exp_img_pos: "undefined" != typeof b.attr("exp_img_pos") ? b.attr("exp_img_pos") : !1,
                            exp_img_w: "undefined" != typeof b.attr("exp_img_w") ? b.attr("exp_img_w") : !1,
                            exp_img_h: "undefined" != typeof b.attr("exp_img_h") ?
                                b.attr("exp_img_h") : !1
                        }; - 1 !== f.inArray("title", h.hide_elements) && (g.title = ""); - 1 !== f.inArray("link", h.hide_elements) && (g.link = ""); - 1 !== f.inArray("image", h.hide_elements) && (g.img = "");
                        if (h.only_w_images && !g.img) return !0;
                        n.news_array.push(g);
                        n.inl_news_count += 1;
                        if (c == h.max_news - 1) return !1
                    }
                })
            })
        })();
        var v = [];
        h.preloader && v.push("lcnb_loading");
        v.push("lcnb_" + h.theme + "_theme");
        h.nav_arrows && (v.push("lcnb_has_cmd lcnb_" + h.nav_arrows + "_cmd"), h.nav_arrows.match(/top/g) && v.push("lcnb_top_cmd"), h.nav_arrows.match(/bottom/g) &&
            v.push("lcnb_bottom_cmd"));
        v.push(h.boxed_news ? "lcnb_boxed" : "lcnb_uniblock");
        h.touchswipe && v.push("lcnb_touchswipe");
        lcnb_count = "undefined" == typeof lcnb_count ? 1 : lcnb_count + 1;
        v = '<div id="lcnb_' + lcnb_count + '" class="lcnb_wrap lcnb_' + h.layout + " " + v.join(" ") + '">';
        h.nav_arrows && (v += '<div class="lcnb_cmd"><div class="lcnb_prev ' + (h.carousel ? "" : "lcnb_disabled") + '"><span></span></div><div class="lcnb_next"><span></span></div></div>');
        v += '<div class="lcnb_inner_wrapper"><div class="lcnb_news_overflow"><div class="lcnb_inner" style="height: ' +
            h.height + 'px;"></div></div></div>';
        l.html(v + "</div>");
        v = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent) ?
            !0 : !1;
        v && (n.event_type = "tap");
        setTimeout(function() {
            R();
            O()
        }, 50);
        return this
    };
    f.fn.lc_swift_box = function(F) {
        f.fn.lcsb_destroy = function() {
            var r = f(this),
                h = r.data("lcnb_vars");
            h.is_playing && clearInterval(h.is_playing);
            r.find(".lcnb_inner").stop();
            r.data("lcnb_settings").touchswipe && r.find(".lcnb_touchswipe .lcnb_inner_wrapper").swipe("destroy");
            r.undelegate(".lcnb_inner_wrapper", "mouseenter mouseleave");
            r.undelegate(".lcnb_social_trigger", h.event_type);
            r.undelegate(".lcnb_btn_expand", h.event_type);
            r.undelegate(".lcnb_exp_block .lcnb_close",
                h.event_type);
            r.undelegate(".lcnb_img_lb, .lcnb_video_lb", "click ontouchstart");
            r.find(".lcnb_next, .lcnb_prev").undelegate("click");
            r.removeData("lcnb_vars");
            r.removeData("lcnb_settings");
            r.removeData("lc_swiftbox");
            return !0
        };
        f.fn.lcsb_paginate = function(r) {
            var h = f(this),
                n = h.data("lcnb_vars"),
                l = h.data("lcnb_settings");
            l = l.slide_all && 0 < l.slideshow_time ? n.news_to_show : 1;
            typeof n.is_playing != udf && clearInterval(n.is_playing);
            n.is_playing = null;
            lcnb_news_slide(h, r, l);
            return !0
        };
        f.fn.lcsb_start_slideshow =
            function() {
                var r = f(this),
                    h = r.data("lcnb_vars"),
                    n = r.data("lcnb_settings");
                h.waiting_for_anim = setInterval(function() {
                    "undefined" != typeof h.is_moving && h.is_moving || (setTimeout(function() {
                        lcnb_start_slideshow(r)
                    }, 1E3 < n.slideshow_time ? 1E3 : n.slideshow_time), clearInterval(h.waiting_for_anim))
                }, 5);
                return !0
            };
        f.fn.lcsb_stop_slideshow = function() {
            var r = f(this),
                h = r.data("lcnb_vars");
            r.data("lcnb_settings");
            clearInterval(h.is_playing);
            h.is_playing = null;
            "undefined" != typeof h.waiting_for_anim && clearInterval(h.waiting_for_anim);
            return !0
        };
        return this.each(function() {
            if (f(this).data("lc_swiftbox")) return f(this).data("lc_swiftbox");
            var r = new O(this, F);
            f(this).data("lc_swiftbox", r)
        })
    }
})(jQuery);